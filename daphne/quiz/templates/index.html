<!DOCTYPE html>
<html lang="ja">
	{% load static %}
    <head>
        <title>INIAD-Q</title>
        <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body>
        <header class="mx-auto">
			<div class="flex justify-between items-center">
				<a href=""><h1 class="text-4xl p-3 bg-clip-text text-transparent bg-gradient-to-r from-red-300 to-yellow-300">INIAD-Q</h1></a>
					<!-- 
					<button>
						<svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
							<path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/>
						</svg>                       
					</button>
					-->
			</div>
			<div class="bg-clip-content bg-gradient-to-b from-red-300 to-yellow-300 text-white">
				<ul>
					<li><a href="#" class="block px-8 py-3 hover:bg-white hover:bg-opacity-25">HOME</a></li>
					<li><a href="#ABOUT" class="block px-8 py-3 hover:bg-white hover:bg-opacity-25">ABOUT</a></li>
					<li><a href="#RANKING" class="block px-8 py-3 hover:bg-white hover:bg-opacity-25">RANKING</a></li>
					<li><a href="#REGISTER" class="block px-8 py-3 hover:bg-white hover:bg-opacity-25">REGISTER</a></li>
				</ul>
			</div>
        </header>
		<section class="p-10 text-center">
			<!-- Main Visual -->
			<div>
			<h2 class="text-6xl font-light border-b-2 border-orange-100">INIAD-Q</h2>
			</div>
		</section>
		<section class="sm:flex text-center items-center justify-center">
			<!-- About Section -->
			<div>
				<h2 class="transform rotate-0 sm:rotate-90 text-4xl sm:text-5xl ">ABOUT</h2><br>
			</div>
			<div class="font-light text-gray-600 sm:mr-12">
				<h3 class="text-2xl border-b-2 border-orange-100">Overview</h3><br>
				<p>イニアド生と来場者、視聴者による楽しいクイズ大会。ジャンルは赤羽、イニアド、東洋そして一般教養！果たして誰がクイズ王に輝くのか？！</p><br>
				<h3 class="text-2xl border-b-2 border-orange-100">Rule</h3><br>
				<p>四択からの選択問題、回答方法はスマホ画面に表示されるものから回答できます</p><br>
				<h3 class="text-2xl border-b-2 border-orange-100">Schedule</h3><br>
				<ul>
					<li>10.29 11:50~(INIADホール)</li>
					<li>10.30 14:10~(七福神広場)</li>
					<li>10.29 16:50~(INIADホール)</li>
				</ul><br>
			</div>
		</section>
		<section class="sm:flex flex-row-reverse items-center justify-center">
			<!-- Ranking Section -->
			<div>
				<h2 class="transform rotate-0 sm:rotate-90 text-4xl sm:text-5xl text-center">RANKING</h2><br>
			</div>
			<div class="flex-initial justify-center w-auto overflow-y-auto mr-6 ml-6 sm:mr-0 h-96 border-2 border-orange-300 rounded">
				<table class="text-gray-800 w-full sm:w-auto">
					{% if object_list %}
					<select name="" id="quiz_events" onchange="select_ranking(); return false;">
						{% for object in object_list %}
							<option value="{{ forloop.counter0 }}">{{ object.name }}</option>
						{% endfor %}
					</select>
					<thead class="text-left border-b-2 border-orange-300">
						<tr>
							<th class="px-4 py-3">#</th><th class="px-4 py-3">Name</th><th class="px-4 py-3">Score</th>
						</tr>
					</thead>
					<tbody>
                                            <div id="display_ranking">
						{% for e_rank in event_ranking %}
							{% if forloop.counter0 == 0 %}
								{% for rank in e_rank %}
                                                <p>
                                                    {{ rank.temp_rank }}位, 名前 {{ rank.user.nickname }}, スコア {{ rank.score }}
                                                </p>
								{% endfor %}
							{% endif %}
						{% endfor %}
                                            </div>
					{% else %}
						<tr>
							<td class="px-4 py-3">準備中...</td>
						</tr>
					{% endif %}
					</tbody>
				</table>
			</div>
		</section><br>
		<section>
			<!-- Register Section -->
			<div class="p-20 items-center leading-10 text-center font-light text-white bg-gradient-to-r from-red-300 to-yellow-300">
				<h2 class="text-5xl ">REGISTER</h2>
				<div class="mt-10">
					<label for="nickname">ニックネーム（必須）</label>
					<input type="text" class="text-gray-600" minlength="2" maxlength="10" id="nickname">
					<button id="join-button" class="mt-10 pl-3 pr-3 pt-2 pb-2 text-2xl bg-white bg-opacity-25 btn" href="quiz_play">参加</button>
				</div>
			</div>
		</section>
		<footer class="m-5 text-center">
			<p>©2022 INIAD-FES実行委員会</p>
		</footer>
    </body>
	<script type="application/javascript" src="{% static 'js/index.js' %}"></script>
	<script type="text/javascript">
    const d_rank = document.getElementById("display_ranking");
    function select_ranking(){
        let id = Number(document.getElementById("quiz_events").value);
        while( d_rank.firstChild ){
            d_rank.removeChild( d_rank.firstChild );
        }
        "{% for e_rank in event_ranking %}"
            if("{{ forloop.counter0 }}" == id){
                "{% for rank in e_rank %}"
                    var text = "{{ rank.temp_rank }}" + "位, 名前 " + "{{ rank.user.nickname }}" + ", スコア " + "{{ rank.score }}" + ", 正答数 " + "{{ rank.correctNums }}";
                    var new_element = document.createElement('p');
                    new_element.textContent = text;
                    d_rank.appendChild(new_element);
                "{% endfor %}"
            };
        "{% endfor %}"
    }
</script>
</html>
